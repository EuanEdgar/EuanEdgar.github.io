(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10dcd7ed"],{5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var n=o("1d80"),r=o("5899"),a="["+r+"]",i=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),u=function(t){return function(e){var o=String(n(e));return 1&t&&(o=o.replace(i,"")),2&t&&(o=o.replace(s,"")),o}};t.exports={start:u(1),end:u(2),trim:u(3)}},6718:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{tabindex:"1"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"z",void 0,e.key,void 0)?null:e.ctrlKey?(e.preventDefault(),t.undo.apply(null,arguments)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"y",void 0,e.key,void 0)?null:e.ctrlKey?(e.preventDefault(),t.redo.apply(null,arguments)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"z",void 0,e.key,void 0)?null:e.metaKey?(e.preventDefault(),t.undo.apply(null,arguments)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"y",void 0,e.key,void 0)?null:e.metaKey?(e.preventDefault(),t.redo.apply(null,arguments)):null},function(e){return e.type.indexOf("key")||16===e.keyCode?t.shift.apply(null,arguments):null}],keyup:function(e){return e.type.indexOf("key")||16===e.keyCode?t.unshift.apply(null,arguments):null}}},[o("Canvas",{ref:"canvas",attrs:{tool:t.tool}}),o("ToolSelector"),o("Options")],1)},r=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Canvas",{ref:"drawLayer",attrs:{colour:t.colour,strokeWidth:t.strokeWidth}}),o("Canvas",{ref:"toolLayer",staticClass:"tool",attrs:{colour:t.colour,strokeWidth:t.strokeWidth},on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onMouseMove}})],1)},i=[],s=(o("a9e3"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("canvas",{ref:"canvas",attrs:{width:"800",height:"800"},on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onMouseMove}})}),u=[],c=(o("159b"),o("fb6a"),o("d65e")),l=function(t,e,o){var n=0;while(t.length&&n<o)e.push(t.pop()),n+=1;return n},f=l,d={data:function(){return{context:null,undoableStack:[],redoableStack:[]}},mounted:function(){this.context=this.$refs.canvas.getContext("2d"),this.context.lineCap="round"},methods:{onMouseDown:function(t){this.$emit("mousedown",t)},onMouseUp:function(t){this.$emit("mouseup",t)},onMouseMove:function(t){this.$emit("mousemove",t)},clearCanvas:function(){var t=this.context,e=this.$refs.canvas;t.clearRect(0,0,e.width,e.height)},commitAction:function(t){this.undoableStack.push(t),this.redoableStack=[],this.redrawFromUndoableStack()},redrawFromUndoableStack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t>=0&&this.clearCanvas();var e=this.undoableStack,o=this.context;e.slice(t).forEach((function(t){var e=c["a"][t.type];e.drawAction(t,o)}))},undo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.undoableStack,o=this.redoableStack,n=f(e,o,t);return this.redrawFromUndoableStack(),n},redo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.undoableStack,o=this.redoableStack,n=f(o,e,t);return n>0&&this.redrawFromUndoableStack(-n),n}}},p=d,h=(o("a548"),o("2877")),v=Object(h["a"])(p,s,u,!1,null,"9e426924",null),m=v.exports,b={props:{colour:String,strokeWidth:Number,tool:Object},data:function(){return{drawContext:null,toolContext:null}},mounted:function(){var t=this.drawLayer,e=this.toolLayer;this.drawContext=t.context,this.toolContext=e.context},methods:{onMouseDown:function(t){this.tool.onMouseDown(t)},onMouseUp:function(t){this.tool.onMouseUp(t)},onMouseMove:function(t){this.tool.onMouseMove(t)},commitAction:function(t){var e=this.$refs.drawLayer;e.commitAction(t)},undo:function(){this.$refs.drawLayer.undo()},redo:function(){this.$refs.drawLayer.redo()}},computed:{drawLayer:function(){return this.$refs.drawLayer},toolLayer:function(){return this.$refs.toolLayer}},components:{Canvas:m}},y=b,k=(o("b31c"),Object(h["a"])(y,a,i,!1,null,"e84b6d9e",null)),g=k.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.options,(function(e){return o("div",{key:e.name+"-"+t.$store.getters["options/namespace"](e.global)},[o("Option",{attrs:{option:e},on:{change:t.onChange}})],1)})),0)},w=[],x=o("5530"),C=(o("d81d"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("p",[t._v(t._s(t.option.name))]),"colour"===t.option.type?o("ColourInput",{attrs:{value:t.option.value},on:{change:t.onChange}}):t._e(),"number"===t.option.type?o("NumberInput",{attrs:{value:t.option.value},on:{change:t.onChange}}):t._e()],1)}),_=[],O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("input",{domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}})},S=[],N={props:{value:String}},I=N,M=Object(h["a"])(I,O,S,!1,null,"b98548e4",null),E=M.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("input",{attrs:{type:"number"},domProps:{value:t.value},on:{change:function(e){t.$emit("change",parseInt(e.target.value,10))}}})},A=[],L={props:{value:Number}},T=L,U=Object(h["a"])(T,j,A,!1,null,"6acf0629",null),F=U.exports,D={props:{option:Object},methods:{onChange:function(t){this.$emit("change",Object(x["a"])(Object(x["a"])({},this.option),{},{value:t}))}},components:{ColourInput:E,NumberInput:F}},P=D,R=Object(h["a"])(P,C,_,!1,null,"60def02b",null),V=R.exports,W={inject:["$store"],computed:{options:function(){var t=this,e=this.$store.state.toolClass;if(e){var o=e.options;return o.map((function(e){var o=t.$store.getters["options/optionValue"](e);return Object(x["a"])(Object(x["a"])({},e),{},{value:o})}))}return[]}},methods:{onChange:function(t){this.$store.dispatch("options/setOption",t)}},components:{Option:V}},K=W,G=Object(h["a"])(K,$,w,!1,null,"564b65a8",null),z=G.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-button-group",t._l(t.toolNames,(function(e){return o("b-button",{key:e,attrs:{variant:t.tool===e?"success":void 0},on:{click:function(o){t.tool=e}}},[t._v(" "+t._s(e)+" ")])})),1)},X=[],Y=o("3835"),q=(o("b64b"),o("7db0"),o("4fad"),{inject:["$store"],computed:{toolNames:function(){return Object.keys(c["a"])},tool:{get:function(){var t=this.$store.state.toolClass;if(t){var e=Object.entries(c["a"]).find((function(e){var o=Object(Y["a"])(e,2),n=o[1];return n===t})),o=Object(Y["a"])(e,1),n=o[0];return n}},set:function(t){this.$store.dispatch("selectTool",t)}}}}),B=q,H=Object(h["a"])(B,J,X,!1,null,"9867c214",null),Q=H.exports,Z={inject:["$store"],mounted:function(){this.$store.dispatch("setToolSettings",this.toolSettings),this.$store.dispatch("selectTool","pen")},computed:{tool:function(){return this.$store.state.tool},toolSettings:function(){var t=this.$refs.canvas,e=t.drawLayer,o=t.toolLayer,n=t.drawContext,r=t.toolContext,a=t.commitAction;return{drawLayer:e,toolLayer:o,drawContext:n,toolContext:r,commitAction:a}}},methods:{undo:function(){this.$refs.canvas.undo()},redo:function(){this.$refs.canvas.redo()},shift:function(){this.$store.state.tool&&this.$store.state.tool.setProps({shift:!0})},unshift:function(){this.$store.state.tool&&this.$store.state.tool.setProps({shift:!1})}},components:{Canvas:g,Options:z,ToolSelector:Q}},tt=Z,et=Object(h["a"])(tt,n,r,!1,null,"195c09a5",null);e["default"]=et.exports},7156:function(t,e,o){var n=o("861d"),r=o("d2bb");t.exports=function(t,e,o){var a,i;return r&&"function"==typeof(a=e.constructor)&&a!==o&&n(i=a.prototype)&&i!==o.prototype&&r(t,i),t}},"7db0":function(t,e,o){"use strict";var n=o("23e7"),r=o("b727").find,a=o("44d2"),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(i)},a548:function(t,e,o){"use strict";o("ab25")},a9e3:function(t,e,o){"use strict";var n=o("83ab"),r=o("da84"),a=o("94ca"),i=o("6eeb"),s=o("5135"),u=o("c6b6"),c=o("7156"),l=o("c04e"),f=o("d039"),d=o("7c73"),p=o("241c").f,h=o("06cf").f,v=o("9bf2").f,m=o("58a8").trim,b="Number",y=r[b],k=y.prototype,g=u(d(k))==b,$=function(t){var e,o,n,r,a,i,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(o=c.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(a=c.slice(2),i=a.length,s=0;s<i;s++)if(u=a.charCodeAt(s),u<48||u>r)return NaN;return parseInt(a,n)}return+c};if(a(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,x=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof x&&(g?f((function(){k.valueOf.call(o)})):u(o)!=b)?c(new y($(e)),o,x):$(e)},C=n?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0;C.length>_;_++)s(y,w=C[_])&&!s(x,w)&&v(x,w,h(y,w));x.prototype=k,k.constructor=x,i(r,b,x)}},ab25:function(t,e,o){},b31c:function(t,e,o){"use strict";o("e924")},e924:function(t,e,o){}}]);
//# sourceMappingURL=chunk-10dcd7ed.c0b97249.js.map