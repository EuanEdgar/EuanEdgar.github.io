{"version":3,"sources":["webpack:///./src/sites/paint/store/options.js","webpack:///./src/sites/paint/store/index.js"],"names":["namespaced","state","global","tool","mutations","setOption","namespace","key","value","clearToolOptions","actions","getters","commit","dispatch","name","root","selectTool","options","forEach","option","optionValue","default","toolClass","toolSettings","setToolSettings","settings","setToolClass","setTool","toolName","tools","cancel","setToolOptions","setOptions","modules"],"mappings":"+JAAe,G,oBAAA,CACbA,YAAY,EACZC,MAAO,CACLC,OAAQ,GACRC,KAAM,IAERC,UAAW,CACTC,UADS,SACCJ,EADD,GACmC,IAAzBK,EAAyB,EAAzBA,UAAWC,EAAc,EAAdA,IAAKC,EAAS,EAATA,MACjCP,EAAMK,GAAN,iCACKL,EAAMK,IADX,qBAEGC,EAAMC,KAGXC,iBAPS,SAOQR,GACfA,EAAME,KAAO,KAGjBO,QAAS,CACPL,UADO,cAG6B,IADlCM,EACkC,EADlCA,QAASC,EACyB,EADzBA,OAAQC,EACiB,EADjBA,SAAUZ,EACO,EADPA,MACxBa,EAA+B,EAA/BA,KAAMN,EAAyB,EAAzBA,MAAyB,IAAlBN,cAAkB,SAC5BI,EAAYK,EAAQL,UAAUJ,GACpCU,EAAO,YAAa,CAAEN,YAAWC,IAAKO,EAAMN,UAE5CK,EAAS,uBAAD,eAAC,kBAA6BZ,EAAMC,QAAWD,EAAME,MAAQ,CAAEY,MAAM,KAE/EC,WATO,WASyBC,GAAS,IAA5BL,EAA4B,EAA5BA,OAAQD,EAAoB,EAApBA,QACnBC,EAAO,oBACPK,EAAQC,SAAQ,SAACC,GACf,IAAMX,EAAQW,EAAOX,OAASG,EAAQS,YAAYD,IAAWA,EAAOE,QAEpET,EAAO,YAAa,CAClBN,UAAWK,EAAQL,UAAUa,EAAOjB,QACpCK,IAAKY,EAAOL,KACZN,eAKRG,QAAS,CACPL,UAAW,kBAAM,SAACJ,GAAD,OAAaA,EAAS,SAAW,SAClDkB,YAAa,SAACnB,EAAOU,GAAR,OAAoB,gBAAGG,EAAH,EAAGA,KAAMZ,EAAT,EAASA,OAAT,OAAsBD,EAAMU,EAAQL,UAAUJ,IAASY,QCrC7E,cACbb,MAAO,CACLE,KAAM,KACNmB,UAAW,KACXC,aAAc,IAEhBnB,UAAW,CACToB,gBADS,SACOvB,EAAOwB,GACrBxB,EAAMsB,aAAeE,GAEvBC,aAJS,SAIIzB,EAAOqB,GAClBrB,EAAMqB,UAAYA,GAEpBK,QAPS,SAOD1B,EAAOE,GACbF,EAAME,KAAOA,IAGjBO,QAAS,CACPM,WADO,WACiCY,GAAU,IAArC3B,EAAqC,EAArCA,MAAOY,EAA8B,EAA9BA,SAAUD,EAAoB,EAApBA,OACtBU,EAAYO,EAAMA,KAAAD,GAExB,IAAK3B,EAAME,QAAUF,EAAME,gBAAgBmB,GAAY,CACjDrB,EAAME,OACRF,EAAME,KAAK2B,SACXlB,EAAO,UAAW,OAGpBA,EAAO,eAAgBU,GAEvBT,EAAS,qBAAsBS,EAAUL,SAEzC,IAAMd,EAAO,IAAImB,EAAJ,gDAAmBrB,EAAMsB,cAAiBtB,EAAMgB,QAAQf,QAAWD,EAAMgB,QAAQd,OAC9FS,EAAO,UAAWT,KAGtBqB,gBAlBO,WAkBqBC,GAAU,IAApBb,EAAoB,EAApBA,OAChBA,EAAO,kBAAmBa,IAE5BM,eArBO,WAqBmBd,GAAS,IAAlBhB,EAAkB,EAAlBA,MACfA,EAAME,KAAK6B,WAAWf,KAG1BgB,QAAS,CACPhB","file":"js/chunk-2d21af3a.e8597f43.js","sourcesContent":["export default {\n  namespaced: true,\n  state: {\n    global: {},\n    tool: {},\n  },\n  mutations: {\n    setOption(state, { namespace, key, value }) {\n      state[namespace] = {\n        ...state[namespace],\n        [key]: value,\n      };\n    },\n    clearToolOptions(state) {\n      state.tool = {};\n    },\n  },\n  actions: {\n    setOption({\n      getters, commit, dispatch, state,\n    }, { name, value, global = false }) {\n      const namespace = getters.namespace(global);\n      commit('setOption', { namespace, key: name, value });\n\n      dispatch('paint/setToolOptions', { ...state.global, ...state.tool }, { root: true });\n    },\n    selectTool({ commit, getters }, options) {\n      commit('clearToolOptions');\n      options.forEach((option) => {\n        const value = option.value || getters.optionValue(option) || option.default;\n\n        commit('setOption', {\n          namespace: getters.namespace(option.global),\n          key: option.name,\n          value,\n        });\n      });\n    },\n  },\n  getters: {\n    namespace: () => (global) => (global ? 'global' : 'tool'),\n    optionValue: (state, getters) => ({ name, global }) => state[getters.namespace(global)][name],\n  },\n};\n","import tools from '@/sites/paint/tools';\n\nimport options from './options';\n\nexport default {\n  state: {\n    tool: null,\n    toolClass: null,\n    toolSettings: {},\n  },\n  mutations: {\n    setToolSettings(state, settings) {\n      state.toolSettings = settings;\n    },\n    setToolClass(state, toolClass) {\n      state.toolClass = toolClass;\n    },\n    setTool(state, tool) {\n      state.tool = tool;\n    },\n  },\n  actions: {\n    selectTool({ state, dispatch, commit }, toolName) {\n      const toolClass = tools[toolName];\n\n      if (!state.tool || !(state.tool instanceof toolClass)) {\n        if (state.tool) {\n          state.tool.cancel();\n          commit('setTool', null);\n        }\n\n        commit('setToolClass', toolClass);\n\n        dispatch('options/selectTool', toolClass.options);\n\n        const tool = new toolClass({ ...state.toolSettings, ...state.options.global, ...state.options.tool });\n        commit('setTool', tool);\n      }\n    },\n    setToolSettings({ commit }, settings) {\n      commit('setToolSettings', settings);\n    },\n    setToolOptions({ state }, options) {\n      state.tool.setOptions(options);\n    },\n  },\n  modules: {\n    options,\n  },\n};\n"],"sourceRoot":""}